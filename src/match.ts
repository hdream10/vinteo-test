// Что было плохо и почему:
// Прямое использование индексов без проверки, что метод `match` вернул корректный результат,
// это может привести к ошибке, если входные данные не соответствуют шаблону.

// Что стало лучше и почему:
// Добавлена проверка для гарантии, что регулярное выражение действительно нашло совпадение.
// Это улучшает стабильность кода и предотвращает возможные ошибки.

const match = rawHeaderLine.match(headerPattern);

if (match) headers.set(match[1].toLowerCase(), match[2]);
else console.error('Invalid header line');
